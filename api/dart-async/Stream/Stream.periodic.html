<div class="col-xs-12 col-sm-9 col-md-8 main-content">
 <section class="multi-line-signature">
  <span class="name ">
   Stream.periodic
  </span>
  (
  <wbr>
  <span class="parameter" id="periodic-param-period">
   <span class="type-annotation">
    <a class="" href="dart-core/Duration-class.html">
     Duration
    </a>
   </span>
   <span class="parameter-name">
    period
   </span>
  </span>
  , [
  <span class="parameter" id="periodic-param-computation">
   <span class="type-annotation">
    T
   </span>
   <span class="parameter-name">
    computation
   </span>
   (
   <span class="parameter" id="computation-param-computationCount">
    <span class="type-annotation">
     <a class="" href="dart-core/int-class.html">
      int
     </a>
    </span>
    <span class="parameter-name">
     computationCount
    </span>
   </span>
   )
  </span>
  ])
 </section>
 <section class="desc markdown">
  <p>
   Creates a stream that repeatedly emits events at
   <code>
    period
   </code>
   intervals.
  </p>
  <p>
   The event values are computed by invoking
   <code>
    computation
   </code>
   . The argument to
this callback is an integer that starts with 0 and is incremented for
every event.
  </p>
  <p>
   If
   <code>
    computation
   </code>
   is omitted the event values will all be
   <code>
    null
   </code>
   .
  </p>
 </section>
 <section class="summary source-code" id="source">
  <h2>
   <span>
    Source
   </span>
  </h2>
  <pre>
   <code class="prettyprint lang-dart">
    factory Stream.periodic(Duration period,
                        [T computation(int computationCount)]) {
  if (computation == null) computation = ((i) =&gt; null);

  Timer timer;
  int computationCount = 0;
  StreamController&lt;T&gt; controller;
  // Counts the time that the Stream was running (and not paused).
  Stopwatch watch = new Stopwatch();

  void sendEvent() {
    watch.reset();
    T data = computation(computationCount++);
    controller.add(data);
  }

  void startPeriodicTimer() {
    assert(timer == null);
    timer = new Timer.periodic(period, (Timer timer) {
      sendEvent();
    });
  }

  controller = new StreamController&lt;T&gt;(sync: true,
      onListen: () {
        watch.start();
        startPeriodicTimer();
      },
      onPause: () {
        timer.cancel();
        timer = null;
        watch.stop();
      },
      onResume: () {
        assert(timer == null);
        Duration elapsed = watch.elapsed;
        watch.start();
        timer = new Timer(period - elapsed, () {
          timer = null;
          startPeriodicTimer();
          sendEvent();
        });
      },
      onCancel: () {
        if (timer != null) timer.cancel();
        timer = null;
      });
  return controller.stream;
}
   </code>
  </pre>
 </section>
</div>
